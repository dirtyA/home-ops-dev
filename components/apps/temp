Name:         tobs
Namespace:    monitoring
Labels:       app=tobs
              kustomize.toolkit.fluxcd.io/name=apps
              kustomize.toolkit.fluxcd.io/namespace=flux-system
Annotations:  <none>
API Version:  helm.toolkit.fluxcd.io/v2beta1
Kind:         HelmRelease
Metadata:
  Creation Timestamp:  2022-08-24T05:02:29Z
  Finalizers:
    finalizers.fluxcd.io
  Generation:  1
  Managed Fields:
    API Version:  helm.toolkit.fluxcd.io/v2beta1
    Fields Type:  FieldsV1
    fieldsV1:
      f:metadata:
        f:labels:
          f:app:
          f:kustomize.toolkit.fluxcd.io/name:
          f:kustomize.toolkit.fluxcd.io/namespace:
      f:spec:
        f:chart:
          f:spec:
            f:chart:
            f:interval:
            f:sourceRef:
              f:kind:
              f:name:
              f:namespace:
            f:version:
        f:install:
          f:createNamespace:
          f:remediation:
            f:retries:
          f:timeout:
        f:interval:
        f:upgrade:
          f:remediation:
            f:retries:
          f:timeout:
        f:values:
    Manager:      kustomize-controller
    Operation:    Apply
    Time:         2022-08-24T05:02:29Z
    API Version:  helm.toolkit.fluxcd.io/v2beta1
    Fields Type:  FieldsV1
    fieldsV1:
      f:metadata:
        f:finalizers:
          .:
          v:"finalizers.fluxcd.io":
      f:status:
        f:conditions:
        f:failures:
        f:helmChart:
        f:installFailures:
        f:lastAttemptedRevision:
        f:lastAttemptedValuesChecksum:
        f:observedGeneration:
    Manager:         helm-controller
    Operation:       Update
    Time:            2022-08-24T05:19:07Z
  Resource Version:  23061757
  UID:               a6648efd-3e64-4b4e-8b26-71ad1bbc94cb
Spec:
  Chart:
    Spec:
      Chart:               tobs
      Interval:            15m
      Reconcile Strategy:  ChartVersion
      Source Ref:
        Kind:       HelmRepository
        Name:       timescale-charts
        Namespace:  flux-system
      Version:      14.0.0
  Install:
    Create Namespace:  true
    Remediation:
      Retries:  10
    Timeout:    15m
  Interval:     15m
  Upgrade:
    Remediation:
      Retries:  10
    Timeout:    15m
  Values:
    Kube - Prometheus - Stack:
      Alert Manager:
        Alertmanager Spec:
          Replicas:  1
        Enabled:     true
      Enabled:       true
      Grafana:
        Admin Password:  faith6510
        Enabled:         true
        Ingress:
          Annotations:
            cert-manager.io/cluster-issuer:                    ca-issuer
            hajimari.io/enable:                                true
            hajimari.io/icon:                                  mdiPlayNetwork
            traefik.ingress.kubernetes.io/router.entrypoints:  websecure
          Enabled:                                             true
          Hosts:
            grafana.thekao.cloud
          Ingress Class Name:  traefik
          Tls:
            Hosts:
              grafana.thekao.cloud
            Secret Name:  grafana.thekao.cloud
        Prometheus:
          Datasource:
            Enabled:  true
        Timescale:
          Datasource:
            Enabled:  true
      Prometheus:
        Ingress:
          Annotations:
            cert-manager.io/cluster-issuer:                    ca-issuer
            traefik.ingress.kubernetes.io/router.entrypoints:  websecure
          Enabled:                                             true
          Hosts:
            prometheus.thekao.cloud
          Ingress Class Name:  traefik
          Tls:
            Hosts:
              prometheus.thekao.cloud
            Secret Name:  prometheus.thekao.cloud
        Prometheus Spec:
          Evaluation Interval:  1m
          Replicas:             1
          Retention:            1d
          Scrape Interval:      1m
          Scrape Timeout:       10s
          Storage Spec:
            Volume Claim Template:
              Spec:
                Resources:
                  Requests:
                    Storage:  3Gi
    Opentelemetry - Operator:
      Enabled:  false
    Promscale:
      Enabled:  true
      Service:
        Type:  LoadBalancer
    Timescaledb - Single:
      Backup:
        Enabled:  false
      Enabled:    true
      Load Balancer:
        Enabled:  true
      Persistent Volumes:
        Data:
          Size:  11Gi
        Wal:
          Size:       5Gi
      Replica Count:  1
Status:
  Conditions:
    Last Transition Time:  2022-08-24T05:19:07Z
    Message:               Helm install failed: rate: Wait(n=1) would exceed context deadline
    Reason:                InstallFailed
    Status:                False
    Type:                  Ready
    Last Transition Time:  2022-08-24T05:18:28Z
    Message:               Helm install failed: rate: Wait(n=1) would exceed context deadline

Last Helm logs:

Deployment is not ready: monitoring/tobs-grafana. 0 out of 1 expected pods are ready
Deployment is not ready: monitoring/tobs-promscale. 0 out of 1 expected pods are ready
Deployment is not ready: monitoring/tobs-kube-state-metrics. 0 out of 1 expected pods are ready
Deployment is not ready: monitoring/tobs-grafana. 0 out of 1 expected pods are ready
Deployment is not ready: monitoring/tobs-promscale. 0 out of 1 expected pods are ready
    Reason:                        InstallFailed
    Status:                        False
    Type:                          Released
    Last Transition Time:          2022-08-24T05:19:07Z
    Message:                       Helm uninstall succeeded
    Reason:                        UninstallSucceeded
    Status:                        True
    Type:                          Remediated
  Failures:                        1
  Helm Chart:                      flux-system/monitoring-tobs
  Install Failures:                1
  Last Attempted Revision:         14.0.0
  Last Attempted Values Checksum:  cbe72b7237bf86ceee4f2efcc1e29e426edb31ce
  Observed Generation:             1
Events:
  Type     Reason  Age    From             Message
  ----     ------  ----   ----             -------
  Normal   info    19m    helm-controller  HelmChart 'flux-system/monitoring-tobs' is not ready
  Warning  error   3m37s  helm-controller  Helm install failed: rate: Wait(n=1) would exceed context deadline

Last Helm logs:

Deployment is not ready: monitoring/tobs-grafana. 0 out of 1 expected pods are ready
Deployment is not ready: monitoring/tobs-promscale. 0 out of 1 expected pods are ready
Deployment is not ready: monitoring/tobs-kube-state-metrics. 0 out of 1 expected pods are ready
Deployment is not ready: monitoring/tobs-grafana. 0 out of 1 expected pods are ready
Deployment is not ready: monitoring/tobs-promscale. 0 out of 1 expected pods are ready
  Normal   info   2m58s                helm-controller  Helm uninstall succeeded
  Warning  error  2m58s                helm-controller  reconciliation failed: Helm install failed: rate: Wait(n=1) would exceed context deadline
  Normal   info   2m58s (x2 over 19m)  helm-controller  Helm install has started
